
<link rel="stylesheet" href="/assets/admin/jquery-ui.css" />

<script src="/assets/admin/jquery-ui.js"></script>
<script>

$(function() {
$( "#dob" ).datepicker({
changeMonth: true,
changeYear: true
});

$( "#joining_date" ).datepicker({
changeMonth: true,
changeYear: true
});

$( "#curront_loction_joning_date" ).datepicker({
changeMonth: true,
changeYear: true
});

});





</script>

<div class="span12">
			<section id="wizard">
			  <div class="page-header">
	            <h1>Enter Your Informetion</h1>
	          </div>
	          <%= form_for @member, :html => { :multipart => true }, :url =>"/admin/members/#{@member.id}" do |c|%>

<% 
	     	if @member.profiles[0].language == "E"
	     		@profile_E=@member.profiles[0] 
	     		@profile_M=@member.profiles[1]
	     	else
	     		@profile_E=@member.profiles[1] 
	     		@profile_M=@member.profiles[0]
	     	end
	     		%>


	     		<%= c.label :name %>
			<input id="member_name" class="height35 padding5 span5" type="text" size="30" name="profile_E[name]" value='<%= @profile_E.name %>'>
			<br><br>


			
			
			
			
			<%= c.label :photo %>
			<%= c.file_field :photo %>
			
			<br><br>
			
			<%= c.label :dob %>
			<%
			if !@member.dob.blank?
				@value=@member.dob.strftime("%d/%m/%Y")
			else
				@value=""
				
			end
			%>

			<%= c.text_field :dob, :value =>@value, :class => "height35 padding5 span5", :id => "dob", "data-date-format" => "dd/mm/yyyy" %>
			<br><br>


			<%= c.label :Qualification %>





<script type="text/javascript">
var intqualification=-1;

//FUNCTION TO ADD TEXT BOX ELEMENT
function addQualification(value_E)
{
intqualification = intqualification + 1;
var contentID = document.getElementById('qualification');
var newTBDiv = document.createElement('div');
newTBDiv.setAttribute('id','strText'+intqualification);
newTBDiv.innerHTML = " <input type='text' id='" + intqualification + " ' class='height35 padding5 span5' size='30' value='"+value_E+"' name='qualification_E[" + intqualification + "]'/>";
contentID.appendChild(newTBDiv);
}

//FUNCTION TO REMOVE TEXT BOX ELEMENT
function removeQualification()
{
if(intqualification != 0)
{
var contentID = document.getElementById('qualification');
contentID.removeChild(document.getElementById('strText'+intqualification));
intqualification = intqualification-1;
}
}
</script>
<a href="javascript:addQualification('');" >Add</a>
		<a href="javascript:removeQualification();" >Remove</a>
		<div id="qualification">   </div>


<% 
						@qualifications_E=JSON.parse(@profile_E.qualifications) rescue""
						if !@qualifications_E.blank?
							 
						
						%>
						<%
						

							
							@qualifications_E.each do |qualification| %>

								<script type="text/javascript"> addQualification('<%= qualification[1]%>');</script>
									

							<%

								
						end
					end
						%> 



<br><br>
			<%
			if !@member.joining_date.blank?
				@value=@member.joining_date.strftime("%d/%m/%Y")
				else
				@value=""
				
			end
			%>
			

			<%= c.label :joining_date %>
			<%= c.text_field :joining_date,  :value =>@value, :class => "height35 padding5 span5", :id => "joining_date", "data-date-format" => "dd/mm/yyyy" %>
			
			<%
			if !@member.curront_loction_joning_date.blank?
				@value=@member.curront_loction_joning_date.strftime("%d/%m/%Y")
				else
				@value=""
				
			end
			%>
			<br><br>


			<%= c.label :home_district %>

			<input id="profile_district" class="height35 padding5 span5" type="text" size="30" name="profile_E[district]"  value='<%= @profile_E.district %>'>
			<br><br>


			
			
			<%= c.label :current_post %>

			<input id="profile_current_post" class="height35 padding5 span5" type="text" size="30" name="profile_E[current_post]"  value='<%= @profile_E.current_post %>'>
			<br><br>
			<%= c.label :current_posting_district %>

			<input id="profile_current_workong_district" class="height35 padding5 span5" type="text" size="30" name="profile_E[current_workong_district]" value=<%= @profile_E.current_workong_district%>>
			<br><br>


			<%= c.label :curront_posting_joning_date %>
			<%= c.text_field :curront_loction_joning_date, :value =>@value, :class => "height35 padding5 span5", :id => "curront_loction_joning_date", "data-date-format" => "dd/mm/yyyy" %>
			<br><br>


			<%= c.label :email %>
			<%= c.text_field :email, :rows => 5, :cols => 5, :class => "padding5 span5" %>
			<br><br>
			


						<script type="text/javascript">
var intTextBox=-1;

//FUNCTION TO ADD TEXT BOX ELEMENT
function addElement(value)
{
	if(value==null)
	{
		value="Enter phone no"
	}
intTextBox = intTextBox + 1;
var contentID = document.getElementById('phone');
var newTBDiv = document.createElement('div');
newTBDiv.setAttribute('id','strText'+intTextBox);
newTBDiv.innerHTML = "Phone no.  "+ (intTextBox + 1) +": <input type='text' value='"+value+"' id='" + intTextBox + "' name='phone[" + intTextBox + "]'/>";
contentID.appendChild(newTBDiv);
}

//FUNCTION TO REMOVE TEXT BOX ELEMENT
function removeElement()
{
if(intTextBox != 0)
{
var contentID = document.getElementById('phone');
contentID.removeChild(document.getElementById('strText'+intTextBox));
intTextBox = intTextBox-1;
}
}
</script>
						
<%= c.label :Phonenos %>


		<a href="javascript:addElement(' ');" >Add</a>
		<a href="javascript:removeElement();" >Remove</a>

<div id="phone">   </div>

			
<% 
						
						@phones=JSON.parse(@member.phones) rescue""
						
						if !@phones.blank?
							 @phones.each do |phone| %>
							<script type="text/javascript"> addElement(<%=phone[1]%>); </script>
							
							<% end 
						end%>






<input id="profile_current_workong_district"  type="hidden"  name="profile_M[current_post]" value='<%= @profile_M.current_post %>'>


						<input type="button" value="Save" class="padding10" onclick="check_valid()">
			<input type="button" value="Cancel" class="padding10" onclick="window.location.href='/admin/members'">
			
		<% end %>
<script type="text/javascript">
			

			check_valid = function(){
				// if($('#member_member_date').val()!=null && $('#member_member_date').val() != "")					
				// 	$('#member_member_date').val(new Date($('#member_member_date').val()));
				document.forms[0].submit();
			}

		
		</script>
		
<br><br>